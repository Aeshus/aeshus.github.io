---
import { getCollection } from 'astro:content';
import FormattedDate from '$/components/FormattedDate.astro';

const posts = await getCollection('projects');
const sortedPosts = posts.sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime()
);
---

{
  sortedPosts.map((post) => (
    <article aria-label={post.data.title}>
      <div>
        <FormattedDate date={post.data.startDate} />

        {post.data.endDate ? (
          <>
            -
            <FormattedDate date={post.data.endDate} />
          </>
        ) : null}
      </div>
      <div>
        <a href={'/projects/' + post.slug}>{post.data.title}</a>
      </div>
    </article>
  ))
}
